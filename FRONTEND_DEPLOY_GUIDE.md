# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –¥–µ–ø–ª–æ—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ Fly.io

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π flyctl CLI:**
   ```bash
   curl -L https://fly.io/install.sh | sh
   ```

2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –≤ Fly.io:**
   ```bash
   fly auth login
   ```

## –ö—Ä–æ–∫–∏ –¥–µ–ø–ª–æ—é

### 1. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–±—ñ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm ci

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–±—ñ—Ä–∫–∏
NODE_ENV=production PYTHON_API_URL=https://glow-nest-api.fly.dev npm run build

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–π–ª—ñ–≤ –∑–±—ñ—Ä–∫–∏
ls -la dist/spa/
ls -la dist/server/
```

### 2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Fly.io –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (–≤–∏–∫–æ–Ω–∞—Ç–∏ –æ–¥–∏–Ω —Ä–∞–∑)
fly apps create glow-nest-frontend --region fra
```

### 3. –î–µ–ø–ª–æ–π

```bash
# –î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
fly deploy

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
fly status

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
fly logs
```

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–º–µ–Ω—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω—É
fly certs create your-domain.com

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—É
fly certs show your-domain.com
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

- `Dockerfile` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –∑–±—ñ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑—É
- `fly.toml` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Fly.io –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- `nginx.conf` - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Nginx –¥–ª—è SPA —Ç–∞ –ø—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è API

## –í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏

### –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:
- `NODE_ENV=production` - –¥–ª—è production –∑–±—ñ—Ä–∫–∏
- `PYTHON_API_URL=https://glow-nest-api.fly.dev` - URL Python API

### API –ü—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è

Nginx –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è:
- –û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ React SPA
- –ü—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è `/api/*` –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ Python backend
- –ü—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è –ø—Ä—è–º–∏—Ö API –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (`/health`, `/scraper/*`, —Ç–æ—â–æ)

### –ö–µ—à —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è

- –°—Ç–∞—Ç–∏—á–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ –∫–µ—à—É—é—Ç—å—Å—è –Ω–∞ 1 —Ä—ñ–∫
- API –∑–∞–ø–∏—Ç–∏ –Ω–µ –∫–µ—à—É—é—Ç—å—Å—è
- SPA –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ fallback –¥–æ `index.html`

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–µ–ø–ª–æ—é

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
   ```bash
   curl https://glow-nest-frontend.fly.dev/
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API –ø—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è:**
   ```bash
   curl https://glow-nest-frontend.fly.dev/health
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:**
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ https://glow-nest-frontend.fly.dev
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
   - –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ –∑ –∑–±—ñ—Ä–∫–æ—é

```bash
# –û—á–∏—Å—Ç–∫–∞ —Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –∑–±—ñ—Ä–∫–∞
rm -rf node_modules dist
npm ci
npm run build
```

### –ü—Ä–æ–±–ª–µ–º–∞ –∑ API

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ Python API –ø—Ä–∞—Ü—é—î: https://glow-nest-api.fly.dev/health
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: `fly logs`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ

### –ü—Ä–æ–±–ª–µ–º–∞ –∑ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—î—é

–í—Å—ñ –º–∞—Ä—à—Ä—É—Ç–∏ SPA –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ `index.html`. –Ø–∫—â–æ –æ—Ç—Ä–∏–º—É—î—Ç–µ 404:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ñ–∞–π–ª `index.html` —ñ—Å–Ω—É—î –≤ `/usr/share/nginx/html`

## –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å—É
fly status

# SSH –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
fly ssh console

# –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
fly scale count 1

# –ü–µ—Ä–µ–≥–ª—è–¥ –º–µ—Ç—Ä–∏–∫
fly metrics

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
fly restart
```
