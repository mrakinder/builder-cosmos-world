<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Glow Nest XGB - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }

      .header p {
        opacity: 0.9;
        font-size: 1.1rem;
      }

      .content {
        padding: 30px;
      }

      .modules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      .module-card {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 25px;
        border-left: 5px solid;
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .module-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      }

      .module-card.scraper {
        border-left-color: #28a745;
      }
      .module-card.ml {
        border-left-color: #007bff;
      }
      .module-card.prophet {
        border-left-color: #6f42c1;
      }
      .module-card.streamlit {
        border-left-color: #fd7e14;
      }
      .module-card.superset {
        border-left-color: #dc3545;
      }

      .module-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }

      .module-icon {
        font-size: 2rem;
        margin-right: 15px;
      }

      .module-title {
        font-size: 1.4rem;
        font-weight: bold;
        color: #2c3e50;
      }

      .module-status {
        margin-left: auto;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .status-idle {
        background: #e9ecef;
        color: #6c757d;
      }
      .status-running {
        background: #d4edda;
        color: #155724;
      }
      .status-completed {
        background: #cce5ff;
        color: #004085;
      }
      .status-error {
        background: #f8d7da;
        color: #721c24;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #e9ecef;
        border-radius: 10px;
        margin: 15px 0;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s ease;
        border-radius: 10px;
      }

      .button-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 15px;
      }

      .btn {
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9rem;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .btn-primary {
        background: #007bff;
        color: white;
      }
      .btn-success {
        background: #28a745;
        color: white;
      }
      .btn-warning {
        background: #fd7e14;
        color: white;
      }
      .btn-danger {
        background: #dc3545;
        color: white;
      }
      .btn-secondary {
        background: #6c757d;
        color: white;
      }
      .btn-info {
        background: #17a2b8;
        color: white;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .system-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .metric-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .metric-value {
        font-size: 2rem;
        font-weight: bold;
        color: #667eea;
        margin-bottom: 5px;
      }

      .metric-label {
        color: #6c757d;
        font-size: 0.9rem;
      }

      .log-viewer {
        background: #2c3e50;
        color: #ecf0f1;
        border-radius: 10px;
        padding: 20px;
        height: 300px;
        overflow-y: auto;
        font-family: "Courier New", monospace;
        font-size: 0.8rem;
        line-height: 1.4;
        margin-top: 20px;
      }

      .log-entry {
        margin-bottom: 5px;
        padding: 2px 0;
      }

      .log-info {
        color: #3498db;
      }
      .log-error {
        color: #e74c3c;
      }
      .log-warning {
        color: #f39c12;
      }
      .log-success {
        color: #2ecc71;
      }

      @media (max-width: 768px) {
        .container {
          margin: 10px;
          border-radius: 15px;
        }

        .header {
          padding: 20px;
        }

        .header h1 {
          font-size: 2rem;
        }

        .content {
          padding: 20px;
        }

        .modules-grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .system-overview {
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
        }

        .btn {
          padding: 10px 16px;
          font-size: 0.8rem;
        }
      }

      .loading-spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #667eea;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
        display: inline-block;
        margin-right: 8px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .alert {
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        font-weight: bold;
      }

      .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .alert-warning {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }
      .alert-info {
        background: #cce5ff;
        color: #004085;
        border: 1px solid #bee5eb;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üè† Glow Nest XGB</h1>
        <p>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–æ—é –∞–Ω–∞–ª—ñ–∑—É –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ</p>
        <p style="font-size: 0.9rem; opacity: 0.8">
          5 –º–æ–¥—ÉÔøΩÔøΩ—ñ–≤ ‚Ä¢ –Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫ ‚Ä¢ –†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É
        </p>
      </div>

      <div class="content">
        <!-- System Overview -->
        <div class="system-overview">
          <div class="metric-card">
            <div class="metric-value" id="totalProperties">-</div>
            <div class="metric-label">–í—Å—å–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω—å</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" id="activeModules">-</div>
            <div class="metric-label">–ê–∫—Ç–∏–≤–Ω—ñ –º–æ–¥—É–ª—ñ</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" id="lastUpdate">-</div>
            <div class="metric-label">–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" id="systemStatus">-</div>
            <div class="metric-label">–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏</div>
          </div>
        </div>

        <!-- Modules Grid -->
        <div class="modules-grid">
          <!-- Module 1: Botasaurus Scraper -->
          <div class="module-card scraper">
            <div class="module-header">
              <div class="module-icon">üï∑Ô∏è</div>
              <div>
                <div class="module-title">Botasaurus Scraper</div>
                <small style="color: #6c757d"
                  >–ú–æ–¥—É–ª—å 1 ‚Ä¢ –ê–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ç –ø–∞—Ä—Å–∏–Ω–≥ OLX</small
                >
              </div>
              <div class="module-status status-idle" id="scraperStatus">
                –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π
              </div>
            </div>

            <div class="progress-bar">
              <div
                class="progress-fill"
                id="scraperProgress"
                style="width: 0%"
              ></div>
            </div>

            <div class="button-group">
              <button class="btn btn-success" onclick="startScraping('sale')">
                ‚ñ∂Ô∏è –ü–∞—Ä—Å–∏–Ω–≥ (–ü—Ä–æ–¥–∞–∂)
              </button>
              <button class="btn btn-info" onclick="startScraping('rent')">
                üè† –ü–∞—Ä—Å–∏–Ω–≥ (–û—Ä–µ–Ω–¥–∞)
              </button>
              <button class="btn btn-danger" onclick="stopScraping()">
                ‚èπÔ∏è –ó—É–ø–∏–Ω–∏—Ç–∏
              </button>
              <button class="btn btn-secondary" onclick="getScrapingStatus()">
                üìä –°—Ç–∞—Ç—É—Å
              </button>
            </div>
          </div>

          <!-- Module 2: LightAutoML -->
          <div class="module-card ml">
            <div class="module-header">
              <div class="module-icon">üß†</div>
              <div>
                <div class="module-title">LightAutoML</div>
                <small style="color: #6c757d"
                  >–ú–æ–¥—É–ª—å 2 ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ</small
                >
              </div>
              <div class="module-status status-idle" id="mlStatus">–ì–æ—Ç–æ–≤–æ</div>
            </div>

            <div class="progress-bar">
              <div
                class="progress-fill"
                id="mlProgress"
                style="width: 0%"
              ></div>
            </div>

            <div class="button-group">
              <button class="btn btn-primary" onclick="trainMLModel()">
                üèãÔ∏è –¢—Ä–µ–Ω—É–≤–∞—Ç–∏ –º–æ–¥–µ–ª—å
              </button>
              <button class="btn btn-info" onclick="testMLPrediction()">
                üîÆ –¢–µ—Å—Ç–æ–≤–∏–π –ø—Ä–æ–≥–Ω–æ–∑
              </button>
              <button class="btn btn-secondary" onclick="getMLStatus()">
                üìà –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª—ñ
              </button>
            </div>
          </div>

          <!-- Module 3: Prophet Forecasting -->
          <div class="module-card prophet">
            <div class="module-header">
              <div class="module-icon">üìà</div>
              <div>
                <div class="module-title">Prophet Forecasting</div>
                <small style="color: #6c757d"
                  >–ú–æ–¥—É–ª—å 3 ‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑–∏ —Ç—Ä–µ–Ω–¥—ñ–≤ –ø–æ —Ä–∞–π–æ–Ω–∞—Ö</small
                >
              </div>
              <div class="module-status status-idle" id="prophetStatus">
                –ì–æ—Ç–æ–≤–æ
              </div>
            </div>

            <div class="progress-bar">
              <div
                class="progress-fill"
                id="prophetProgress"
                style="width: 0%"
              ></div>
            </div>

            <div class="button-group">
              <button class="btn btn-warning" onclick="generateForecasts()">
                üìä –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏
              </button>
              <button class="btn btn-info" onclick="viewForecasts()">
                üìà –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ç—Ä–µ–Ω–¥–∏
              </button>
              <button class="btn btn-secondary" onclick="getProphetStatus()">
                üìã –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤
              </button>
            </div>
          </div>

          <!-- Module 4: Streamlit Interface -->
          <div class="module-card streamlit">
            <div class="module-header">
              <div class="module-icon">üåê</div>
              <div>
                <div class="module-title">Streamlit Interface</div>
                <small style="color: #6c757d"
                  >–ú–æ–¥—É–ª—å 4 ‚Ä¢ –ü—É–±–ª—ñ—á–Ω–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å</small
                >
              </div>
              <div class="module-status status-idle" id="streamlitStatus">
                –ó—É–ø–∏–Ω–µ–Ω–æ
              </div>
            </div>

            <div class="button-group">
              <button
                class="btn btn-success"
                onclick="controlStreamlit('start')"
              >
                üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Streamlit
              </button>
              <button class="btn btn-danger" onclick="controlStreamlit('stop')">
                ‚èπÔ∏è –ó—É–ø–∏–Ω–∏—Ç–∏
              </button>
              <a
                href="http://localhost:8501"
                target="_blank"
                class="btn btn-info"
              >
                üîó –í—ñ–¥–∫—Ä–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
              </a>
            </div>
          </div>

          <!-- Module 5: Apache Superset -->
          <div class="module-card superset">
            <div class="module-header">
              <div class="module-icon">üìä</div>
              <div>
                <div class="module-title">Apache Superset</div>
                <small style="color: #6c757d"
                  >–ú–æ–¥—É–ª—å 5 ‚Ä¢ –ë—ñ–∑–Ω–µ—Å-–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞</small
                >
              </div>
              <div class="module-status status-idle" id="supersetStatus">
                –î–æ—Å—Ç—É–ø–Ω–æ
              </div>
            </div>

            <div class="button-group">
              <a
                href="http://localhost:8088"
                target="_blank"
                class="btn btn-primary"
              >
                üìä –í—ñ–¥–∫—Ä–∏—Ç–∏ Superset
              </a>
              <button class="btn btn-info" onclick="getSupersetStatus()">
                üìã –°—Ç–∞—Ç—É—Å –¥–∞—à–±–æ—Ä–¥—ñ–≤
              </button>
              <button class="btn btn-secondary" onclick="showSupersetInfo()">
                ‚ÑπÔ∏è –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
              </button>
            </div>
          </div>

          <!-- Backend Deployment -->
          <div class="module-card" style="border-left-color: #17a2b8">
            <div class="module-header">
              <div class="module-icon">üöÄ</div>
            </div>
            <div>
              <div class="module-title">Backend Deployment</div>
              <small style="color: #6c757d">Deploy FastAPI backend</small>
            </div>
            <div class="button-group">
              <button class="btn btn-primary" id="deployBackendBtn" onclick="deployBackend()">
                üöÄ Deploy Backend
              </button>
            </div>
          </div>

          <!-- Street Management -->
          <div class="module-card" style="border-left-color: #17a2b8">
            <div class="module-header">
              <div class="module-icon">üó∫Ô∏è</div>
              <div>
                <div class="module-title">–ú–µ–Ω–µ–¥–∂–µ—Ä –≤—É–ª–∏—Ü—å</div>
                <small style="color: #6c757d"
                  >–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤—É–ª–∏—Ü—è–º–∏ —Ç–∞ —Ä–∞–π–æ–Ω–∞–º–∏</small
                >
              </div>
            </div>

            <div class="button-group">
              <button class="btn btn-primary" onclick="showStreetManager()">
                üìù –î–æ–¥–∞—Ç–∏ –≤—É–ª–∏—Ü—é
              </button>
              <button class="btn btn-info" onclick="viewStreetMappings()">
                üìã –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –º–∞–ø—ñ–Ω–≥
              </button>
            </div>
          </div>
        </div>

        <!-- Live Event Log -->
        <div style="margin-top: 30px">
          <h3 style="color: #2c3e50; margin-bottom: 15px">
            üìú –ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π (Live)
          </h3>
          <div class="log-viewer" id="eventLog">
            <div class="log-entry log-info">
              [INFO] –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ —Ä–æ–±–æ—Ç–∏
            </div>
            <div class="log-entry log-info">
              [INFO] –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ API —Å–µ—Ä–≤–µ—Ä–∞...
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="admin.js"></script>
  </body>
</html>
